<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- The HTML 4.01 Transitional DOCTYPE declaration-->
<!-- above set at the top of the file will set     -->
<!-- the browser's rendering engine into           -->
<!-- "Quirks Mode". Replacing this declaration     -->
<!-- with a "Standards Mode" doctype is supported, -->
<!-- but may lead to some differences in layout.   -->

<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Send data for storage</title>
<script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
<style>
body {
	font-family: sans-serif;
}

.label {
	margin-top: 1rem;
}
</style>
<script>
	$(function() {
		$("form").submit(function() {
			function onerror(x) {
				alert("Error:" + x);
			}
			function onsuccess(result) {
				if (result.errormsg)
					onerror(result.errormsg);
				else
					alert("Success! Return... " + JSON.stringify(result));
			}

			var params = {
				id : $("#num").val(),
				owner_id : $("#person").val(),
				title : $("#title").val(),
				rating : $("#rating").val(),
				comment : $("#comment").val(),
				active : $("#active:checked").length
			};
			$.ajax({
				url : "/track_trails",
				method : "post",
				data : params,
				dataType : "json",
				error : onerror,
				success : onsuccess
			})
			return false;
		});
	});
</script>
</head>


<body>
	<h1>Add new trail</h1>

	<form>
		<div class="label">Trail ID:</div>
		<div>
			<input type="text" id="num">
		</div>
		
		<div class="label">Owner ID:</div>
		<div>
			<input type="text" id="person">
		</div>
		
		<div class="label">Title:</div>
		<div>
			<input type="text" id="title">
		</div>
		
		<div class="label">Rating:</div>
		<div>
			<input type="text" id="rating">
		</div>
		
		<div class="label">Comment:</div>
		<div>
			<input type="text" id="comment">
		</div>
		
		<div class="label">Active?</div>
		<div>
			<input type="checkbox" id="active" checked>
		</div>
		
		<div class="label">
			<input type="submit" value="Send"> <input type="reset"
				value="Clear form">
		</div>
	</form>
</body>
</html>
